<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
    "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="fr" lang="fr">
<head>
    <title>SliTaz Scratchbook - Xorg</title>
    <meta http-equiv="content-type" content="text/html; charset=ISO-8859-1" />
    <meta name="description" content="xorg proto libs apps compilation du serveur X Xorg" />
    <meta name="expires" content="never" />
    <meta name="modified" content="2007-12-24 17:00:00" />
    <meta name="publisher" content="www.slitaz.org" />
    <meta name="author" content="Christophe Lincoln"/>
    <link rel="shortcut icon" href="favicon.ico" />
    <link rel="stylesheet" type="text/css" href="book.css" />
</head>
<body bgcolor="#ffffff">

<!-- Header and quick navigation -->
<div id="header">
<div align="right" id="quicknav">
    <a name="top"></a>
    <a href="index.html">Table des matières</a>
</div>
<h1><font color="#3E1220">SliTaz Scratchbook</font></h1>
</div>

<!-- Content. -->
<div id="content">
<div class="content-right"></div>


<h2><font color="#DF8F06">Howto Xorg - Serveur graphique modulaire</font></h2>
<ul>
	<li><a href="xorg.html#woking">Construire Xorg automatiquement avec Tazwok.</a></li>
    <li><a href="xorg.html#get">Obtenir Xorg avec wget.</a></li>
    <li><a href="xorg.html#make">Compiler Xorg à la main.</a></li>
</ul>
<p>
Note : SliTaz utilise le serveur Xvesa fournit par XFree86 et les bibliothèques
d'Xorg, cette page décrit la compilation des bibliothèques d'Xorg utilisées
sur SliTaz. Ce document est principalement destiné aux développeurs et
contributeurs du projet, mais il peut être utile à toutes personnes cherchant
à recompiler Xorg et les bibliothèques Xlib depuis les sources en générant
un minimum de dépendances.
</p>

<a name="woking"></a>
<h3>Construire Xorg automatiquement avec Tazwok</h3>
<p>
Sur SliTaz, ou si vous avez installé Tazwok, vous pouvez recompiler Xorg en
quelques commandes. Le wok contient un meta-paquet nommé <code>xorg</code> et
un autre nommé <code>xorg-dev</code>, ils permettent de compiler/cuire tous
les paquets Xorg utilisé par SliTaz. Pour compiler vous devez avoir installé
la plus part des paquets de développement, si ce n'est pas le cas :
</p>
<pre>
 # tazpkg get-install slitaz-dev-pkgs
</pre>
<p>
Ensuite vous pouvez lancer la cuisson (si tout est prêt, wok et paquets de
developpement), en commençant par les proto's (xproto, etc) :
</p>
<pre>
 # tazwok cook xorg-dev-proto
 # tazwok cook xorg
 # tazwok cook xorg-dev
</pre>

<a name="get"></a>
<h3>Obtenir Xorg (7.2) avec wget</h3>
<p>
Xorg est distribuée sous forme de modules, ce qui est bien pratique, car
l'on peut installer uniquement ce que l'on veut, mais cela demande beaucoup
de téléchargements. Pour vous aidez nous avons créer un petit script qui
télécharge le minimum pour SliTaz, vous trouverez le script
<code>getXorg.sh</code> dans <a href="../../get/tools.html">SliTaz tools (1.1)</a>.
A noter que ce script n'est plus mis à jour, les développeurs utilisent
<a href="wok-tools.html">les outils et le wok</a>. Pour utiliser le script de
téléchargemnt, il faut ce placer dans le répertoire dans lequel vous désirez
télécharger Xorg, puis lancer le script préalablement copié :
</p>
<pre>
 # cd ..
 # mkdir Xorg &amp;&amp; cd Xorg
 # cp slitaz-tools-1.1/utils/getXorg-7.2.sh .
 # ./getXorg-7.2.sh
</pre>
<a name="make"></a>
<h3>Compiler Xorg à la main</h3>
<p>
La compilation d'Xorg est assez longue, il y a beaucoup de paquets.
Pour commnencer il faut complier tous les paquets proto téléchargés,
vous pouvez utiliser la commande <code>make DESTDIR=$PWD/_pkg install</code>
pour installer le paquet dans un répertoire donné. Exemple avec xproto:
</p>
<pre>
 # cd proto
 # tar xzf xproto-X11R7.2-7.0.10.tar.gz
 # cd xproto-X11R7.2-7.0.10
 # ./configure --prefix=/usr --sysconfdir=/etc \
   --mandir=/usr/share/man --localstatedir=/var \
   --build=i486-pc-linux-gnu --host=i486-pc-linux-gnu
  # make
  # make install
</pre>
<p>
Compilation des bibliothèques en reprenant les options utilisées
pour les proto. Exemple avec le premier paquet à compiler xtrans,
n'oubliez pas de lancer <code>ldconfig</code> si vous installer le
paquet sur la machine de développement:
</p>
<pre>
 # cd .. &amp;&amp; cd lib
 # tar xzf xtrans-X11R7.2-1.0.3.tar.gz
 # cd xtrans-X11R7.2-1.0.3
 # ./configure --prefix=/usr --sysconfdir=/etc \
   --mandir=/usr/share/man --localstatedir=/var \
   --build=i486-pc-linux-gnu --host=i486-pc-linux-gnu
 # make
 # make install
 # ldconfig
</pre>
<p>
Une fois que tous les paquets des bibliothèques sont compilés, vous pouvez
commencer à compiler des applications pour X tels que le terminal graphique
Xterm. SliTaz utilise encore le paquet 'rgb' contenant le fichier
/usr/share/X11/rgb.txt définissant les couleurs. Exemple de compilation pour
<code>xsetroot</code>, application permettant de changer la couleur du fond
d'écran (modifiez $VERSION par la version que vous avez téléchargé :
</p>
<pre>
 # cd .. &amp;&amp; cd app
 # tar xzf xsetroot-$VERSION.tar.gz
 # cd xsetroot-$VERSION
 # ./configure --prefix=/usr --sysconfdir=/etc \
   --mandir=/usr/share/man --localstatedir=/var \
   --build=i486-pc-linux-gnu --host=i486-pc-linux-gnu
 # make &amp;&amp; make install
</pre>


<!-- End of content -->
</div>

<!-- Footer. -->
<div id="footer">
	<div class="footer-right"></div>
	<a href="xorg.html#top">Haut de la page</a> | 
	<a href="index.html">Table des matières</a>
</div>

<div id="copy">
    Copyright © 2007 <a href="http://www.slitaz.org/">SliTaz</a> -
    <a href="http://www.gnu.org/licenses/gpl.html">GNU General Public License</a>;<br />
    Documentation publiées sous
    <a href="http://www.gnu.org/copyleft/fdl.html">GNU Free Documentation License</a>
    et codée en <a href="http://validator.w3.org/">xHTML 1.0 valide</a>.
</div>

</body>
</html>
