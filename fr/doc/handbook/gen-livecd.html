<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
    "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="fr" lang="fr">
<head>
    <title>SliTaz Handbook - Générer son propre LiveCD à saveur</title>
    <meta http-equiv="content-type" content="text/html; charset=ISO-8859-1" />
    <meta name="description" content="créer son propre livecd de slitaz gnu linux tazlito" />
    <meta name="expires" content="never" />
    <meta name="modified" content="2008-01-30 13:30:00" />
    <meta name="publisher" content="www.slitaz.org" />
    <meta name="author" content="Christophe Lincoln"/>
    <link rel="shortcut icon" href="favicon.ico" />
    <link rel="stylesheet" type="text/css" href="book.css" />
</head>
<body bgcolor="#ffffff">

<!-- Header and quick navigation -->
<div id="header">
<div align="right" id="quicknav">
    <a name="top"></a>
    <a href="liveusb.html">LiveUSB</a> |
    <a href="index.html">Table des matières</a>
</div>
<h1><font color="#3E1220">SliTaz Handbook</font></h1>
</div>

<!-- Content. -->
<div id="content">
<div class="content-right"></div>

<h2><font color="#DF8F06">Générer un LiveCD à saveur</font></h2>
<p>
Comment créer son propre LiveCD facilement est rapidement avec Tazlito.
</p>

<ul>
	<li><a href="gen-livecd.html#intro">Pour commencer.</a></li>
	<li><a href="gen-livecd.html#2cmds">Un LiveCD en 2 commandes.</a></li>
	<li><a href="gen-livecd.html#get-flavor">Récupérer une saveur.</a></li>
	<li><a href="gen-livecd.html#gen-distro">Générer la distribution.</a></li>
	<li><a href="gen-livecd.html#gen-flavor">Créer une saveur.</a></li>
	<li><a href="gen-livecd.html#addfiles">Fichiers additionnels.</a></li>
	<li><a href="gen-livecd.html#pkgs">Paquets utilisés.</a></li>
	<li><a href="gen-livecd.html#configure">Fichier de configuration.</a></li>
</ul>

<a name="intro"></a>
<h3><font color="#6c0023">Pour commencer</font></h3>
<p>
Créer sa propre version du LiveCD de SliTaz avec Tazlito (<em>SliTaz Live 
Tool</em>) prend peu de temps et permet de choisir précisément les paquets
logiciels que l'on veut retrouver dans le système. Le support des saveurs
vous pemet de générer un LiveCD personnalisé en modifiant une liste de paquets
ou en utilisant des saveurs crées et envoyées sur slitaz.org par des
utilisateurs ou contributeurs. Tazlito est un outil en ligne de commande, il
ne faut pas que cela vous repousse, vous aurez votre propre image ISO en 2 
commandes et la graverez en 1 commande.
</p>
<p>
La génération du LiveCD demande un minimum de 256 Mb de RAM et la compression
du système avec LZMA peut prendre un certain temps. Il est possible de créer
une distribution depuis le mode LiveCD ou depuis un système installé. En mode
LiveCD, il est conseillé d'utiliser un media USB ou un disque dur pour stocker
les fichiers générés, conserver le travail et gagner de la place en RAM.
</p>
<p>
Tazlito est aussi utilsé par les développeurs SliTaz pour générer le LiveCD
officiel. Les seuls prérequis sont d'avoir Tazlito d'installé, c'est le cas
par défaut sur SliTaz, mais vous pouvez générer le LiveCD depuis une autre
distribution à condition d'avoir les paquets voulus sous la main ou de le
télécharger. 
</p>
<h4>Installer Tazlito sur une autre distribution</h4>
<p>
Tazlito n'a aucune dépendance particulière pour générer le LiveCD, mais il 
dépend de Cdrkit pour graver l'image et de Tazpkg pour regénérer des paquets
SliTaz depuis ceux qui sont installés. Pour récupérer Tazlito et l'installer
en suivant les instructions du fichier README contenu dans <a 
	href="http://download.tuxfamily.org/slitaz/sources/tazlito/"
	>les sources de Tazlito</a>.
</p>

<a name="2cmds"></a>
<h3><font color="#6c0023">Un LiveCD en 2 commandes</font></h3>
<ul>
	<li>Récupérer une saveur : <code>tazlito get-flavor core</code></li>
	<li>En option : Modifier la liste des paquets ou ajouter Fichiers 
	additionnels.</li>
	<li>Générer la distribution : <code>tazlito gen-distro</code></li>
</ul>
<p>
Une fois le travail fini, vous trouvez l'image ISO du LiveCD dans le répertoire 
<code>/home/slitaz/distro</code>.
</p>


<a name="get-flavor"></a>
<h3><font color="#6c0023">Récupérer une saveur</font></h3>
<p>
Une saveur est un fichier <code>.flavor</code> contenant toutes les informations
nécessaires à la création du LiveCD. La saveur fournit une liste des paquets
(<code>distro-packages.list</code>), une description et des fichiers 
additionnels propres à la saveur choisie. La liste des saveurs peut être
téléchargées et mise à jour avec Tazlito :
</p>
<pre>
 # tazlito list-flavors
 Ou :
 # tazlito list-flavors --recharge
</pre>
<p>
La liste des saveurs va automatiquement s'afficher, donnant la taille du 
LiveCD et une brève description. Pour la suite, la commande 
<code>get-flavor</code> va télécharger le fichier de saveur <code>.flavor</code>
extraire automatiquement la liste des paquets et la description dans le 
répertoire courant et mettre les fichiers additionnels dans le répertoire
<code>/home/slitaz/distro/addfiles</code>. Pour stocker les saveurs nous vous
proposons d'utiliser un répertoire spécifique tel que 
<code>/home/slitaz/flavors</code>, vous pouvez créer ce répertoire et vous y
placer avec les commandes :
</p>
<pre>
 # mkdir -p /home/slitaz/flavors
 # cd /home/slitaz/flavors
</pre>
<p>
Pour télécharger et/ou extraire les fichiers d'une saveur particulière :
</p>
<pre>
 # tazlito get-flavor saveur-particuliere
</pre>
<p>
La description d'une saveur peut être affichée avec la commande 
<code>show-flavor</code> de Tazlito. Une fois la saveur choisie téléchargée
et/ou extraite, vous pouvez générer la distribution.
</p>

<a name="gen-distro"></a>
<h3><font color="#6c0023">Générer la distribution</font></h3>
<p>
Pour une première ISO nous vous conseillons de tester sans modifier la liste,
ensuite vous pourrez supprimer ou ajouter des paquets à volonté. Mais attention,
les paquets du système de base sont indispensables. La commande 
<code>gen-distro</code> génère une image ISO avec tous les paquets de la 
liste, il faut être root et être dans le même répertoire que liste et le
fichier de configuration. Pour générer un LiveCD :
</p>
<pre>
 # tazlito gen-distro
</pre>
<p>
Voilà, votre première image ISO du LiveCD est générée dans
<code>/home/slitaz/distro</code>, sans compte pour l'utilisateur hacker.
<p>
<h4>L'utilisateur hacker</h4>
</p>
Si vous désirez avoir un compte utilisateur avec hacker, il faut l'ajouter
et recréer le système de fichier racine compressé :
</p>
<pre>
 # tazlito addhacker
 # tazlito gen-initiso
</pre>
<h4>Nettoyer, regénérer et aller plus loins</h4>
<p>
Pour continuer et aller plus loin,
vous pouvez simplement ajouter un ou deux paquets à la liste, nettoyer la distro
et regénérer le système de fichier racine avec une nouvelle image ISO :
</p>
<pre>
 # tazlito clean-distro
 # tazlito gen-distro
</pre>
<p>
Tazlito fournit encore plusieurs possibilités, telles que la gravure de l'ISO
ou la copie de fichiers additionnels dans le système ou directement sur le cdrom.
Pour connaître toutes les commandes disponibles, vous pouvez vous référer au
<a href="http://www.slitaz.org/doc/manuals/tazlito.html">manuel de Tazlito</a>
installé par défaut sur tous les systèmes SliTaz et accessible depuis le menu
de JWM
</p>

<a name="gen-flavor"></a>
<h3><font color="#6c0023">Créer une saveur</font></h3>
<p>
Tazlito permet de facilement créer une saveur particulière à partir des 
résultats de fabrication de la distribution (<code>gen-distro</code>). Le
fichier de saveur produit contiendra tous les fichiers additionnels, la
decription et la liste de paquets et réutilisé ultérieurement et mis à jour
en fonction des versions des paquets. Pour générer une saveur en répondant à
une ou deux questions :
</p>
<pre>
 # tazlito gen-flavor nouvelle-saveur
</pre>
<p>
Une fois que votre saveur est fonctionnel et bien testées, vous avez la 
possibilité de l'envoyer sur slitaz.org afin qu'elle soit mise à disposition
de tous, listée via <code>list-flavor</code> et utilisable via 
<code>get-flavor</code>. Pour envoyer une saveur vous avez plusieurs moyens,
passer par la liste de discussion, mettre le fichier en ligne et le signaler 
sur le forum ou directement l'envoyer par mail à un contributeur du projet. 
</p>


<a name="addfiles"></a>
<h3><font color="#6c0023">Fichiers additionnels</font></h3>
<p>
Les fichiers de saveurs contiennent généralement des fichiers additionnels
copiés directement dans le système de fichier racine ou dans la racine du
cdrom. Le chemin vers les fichiers à utiliser est spécifié dans le fichier
de configuration <code>tazlito.conf</code>, logiquement et par défaut, les 
fichiers sont situé dans <code>/home/slitaz/distro/addfiles</code>. Les
fichiers additionnels de la saveur <code>core</code> fournissent par exemple
le menu du gestionnaire de fenêtres <a href="jwm.html">JWM</a> et les fonds
d'écrans. Il suffit de modifier, ajouter ou supprimer des fichiers dans le 
pseudo système racine (<code>rootfs</code>) ou la racine du CD 
(<code>rootcd</code>) et de regénérer la distribution pour retouver les
fichiers dans l'ISO. Pour nettoyer et regénérer la distribution :
</p>
<pre>
 # tazlito clean-distro
 # tazlito gen-distro
</pre>

<a name="pkgs"></a>
<h3><font color="#6c0023">Paquets utilisés</font></h3>
<p>
Pour créer votre distro il vous faut des paquets SliTaz. Tazlito et Tazpkg 
permettent de recréer les paquets depuis un système SliTaz en fonctionnement 
ou de télécharger les paquets directement en fonction de la saveur choisie. 
Par logique, sur SliTaz, les paquets se mettent dans le répertoire
<code>/home/slitaz/packages</code>, mais vous pouvez chager cela via un 
fichier de configutation de Tazlito (tazlito.conf).
</p>
<p>
Si vous voulez récupérer des paquets à la main, vous pouvez utiliser un
logiciel FTP tel que gFTP (installé par défaut sur SliTaz) ou la ligne de 
commande et <code>wget</code> pour  télécharger des paquets officiels. L'URL 
direct vers les versions des paquets : 
<a href="ftp://download.tuxfamily.org/slitaz/packages/"
	>ftp://download.tuxfamily.org/slitaz/packages/</a>
</p>
<p>
Vous pouvez aussi utiliser vos propre paquets en les mettant dans le répertoire
des paquets. Si vous cherchez de la documentation au sujet de la création de
paquets SliTaz, vous pouvez vous référer au livre de cuisine ou 
<a href="http://doc.slitaz.org/fr:cookbook:start">Cookbook</a>.
</p>

<a name="configure"></a>
<h3><font color="#6c0023">Fichier de configuration</font></h3>
<p>
Par défaut Tazlito utilise le fichier de configuration système 
<code>/etc/tazlito/tazlito.conf</code> ou un fichier <code>tazlito.conf</code>
situé dans le répertoire courant. C'est à dire que vous pouvez utiliser le
fichier par défaut ou avoir un fichier de configuration spécifique à chaque
distro que vous créez. Ce fichier de configuration permet de changer le nom
de l'image ISO, le nom du préparateur et les chemins vers les répertoires de
travail. Pour créer et configurer directement un fichier de configuration, il
suffit de lancer Tazlito avec la commande <code>configure</code> et cela depuis
le répertoire de la distro (vous pouvez le créer ailleur). En supposant que
avez l'arbre de la distro dans <code>/home/slitaz/distro</code> et que vous
vous y êtes placé avec <code>cd</code>&nbsp;:
</p>
<pre>
 $ tazlito configure
</pre>
<p>
Une fois que vous avez répondu aux questions, vous pouvez soit recréer l'image
ISO, reconstruire le système racine et l'ISO ou générer une nouvelle distro
avec la liste des paquets.
</p>

<!-- End of content -->
</div>

<!-- Footer. -->
<div id="footer">
	<div class="footer-right"></div>
	<a href="gen-livecd.html#top">Haut de la page</a> | 
	<a href="index.html">Table des matières</a>
</div>

<div id="copy">
    Copyright &copy; <span class="year"></span> <a href="http://www.slitaz.org/">SliTaz</a> -
    <a href="http://www.gnu.org/licenses/gpl.html">GNU General Public License</a>;<br />
    Documentation publiées sous
    <a href="http://www.gnu.org/copyleft/fdl.html">GNU Free Documentation License</a>
    et codée en <a href="http://validator.w3.org/">xHTML 1.0 valide</a>.
</div>

</body>
</html>
