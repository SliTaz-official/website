<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
    "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="fr" lang="fr">
<head>
	<title>SliTaz - Forge</title>
	<meta http-equiv="content-type" content="text/html; charset=ISO-8859-1" />
	<meta name="description" content="Développement de SliTaz GNU/Linux" />
	<meta name="keywords" lang="fr" content="developpement slitaz developer GNU Linux" />
	<meta name="robots" content="index, follow, all" />
	<meta name="revisit-after" content="7 days" />
	<meta name="expires" content="never" />
	<meta name="modified" content="2009-16-01 16:00:00" />
	<meta name="author" content="Christophe Lincoln"/>
	<meta name="publisher" content="www.slitaz.org" />
	<link rel="shortcut icon" href="../../favicon.ico" />
	<link rel="stylesheet"  type="text/css" href="../../slitaz.css" />
	<link rel="Content" href="#content" />
</head>
<body bgcolor="#ffffff">

<!-- Header -->
<div id="header">
	<a name="top"></a>
<!-- Access -->
<div id="access">
	Language:
    <a href="../../en/" title="English Web site main page">English</a>
</div>
	<a href="http://www.slitaz.org/fr/"><img id="logo"
	src="../../pics/website/logo.png" title="www.slitaz.org" alt="www.slitaz.org"
	style="border: 0px solid ; width: 200px; height: 74px;" /></a>
	<p id="titre">#!/GNU/Linux</p>
</div>

<!-- Navigation menu -->
<div id="nav">
<div id="nav_top"></div>
<!-- General -->
<ul>
	<li><a href="../about/" title="Informations au sujet du projet SliTaz">A propos du projet</a></li>
	<li><a href="../asso/" title="Infrastructure et services">Association</a></li>
	<li><a href="../get/" title="Téléchargements - LiveCD et sous projets">Obtenir SliTaz</a></li>
	<li><a href="../doc/" title="Handbook, Cookbook et manuels">Documentation</a></li>
	<li><a href="../packages/" title="Paquets logiciels disponibles">Paquets</a></li>
	<li><a href="../devel/" title="Le coin du développeur">Développement</a></li>
	<li><a href="../artwork/" title="Artwork, couleurs et images">Art &amp; graphisme</a></li>
</ul>
<!-- Support -->
<ul>
	<li><a href="http://forum.slitaz.org/" title="Forum d'aide et support">Forum de support</a></li>
	<li><a href="../mailing-list.html" title="Support, contact et collaboration">Liste de discussion</a></li>
	<li><a href="../search.html" title="Rechercher des infos et/ou de la doc">Recherche</a></li>
	<li><a href="../sitemap.html" title="Vue globale du site web">Plan du site</a></li>
</ul>
<!-- Wiki and Labs -->
<ul>
	<li><a href="http://wiki.slitaz.org/" title="Wiki collaboratif">Ressources Wiki</a></li>
	<li><a href="http://labs.slitaz.org/" title="Gestion du projet">Laboratoires</a></li>
	<li><a href="http://labs.slitaz.org/issues" title="Bug Tracking system">Suivi des Bugs</a></li>
</ul>
<div id="nav_bottom">
<div id="nav_bottom_img"></div>
</div>
</div>

<!-- Content top. -->
<div id="content_top">
<div class="top_left"></div>
<div class="top_right"></div>
</div>

<!-- Content -->
<div id="content">
<a name="content"></a>

<h1><font color="#3E1220">Forge</font></h1>

<h2><font color="#DF8F06">Gestion collaborative du développement</font></h2>

<ul>
	<li><a href="#tank">Build host &amp; home.</a></li>
	<li><a href="#repos">Dépôts Mercurial.</a></li>
	<li><a href="#pkgs">Paquets tazpkg.</a></li>
	<li><a href="#site">Gestion du site Web et des livres.</a></li>
	<li><a href="guidelines.html">Guidelines.</a></li>
</ul>

<p>
Le projet SliTaz dispose de divers moyens pour gérer le travail des
développeurs et collaborer. Un système de gestion de révision avec Mercurial
(Hg), des modules de synchronisation avec Rsync, de la documentation, une 
<a href="../mailing-list.html">liste de discussion</a> et un canal IRC. Tous
les développeurs sont inscrits sur la liste, c'est le moyen de collaboration
principal et privilégié.
</p>

<a name="tank"></a>
<h3>Tank - Build host &amp; home</h3>
<p>
Chaque contributeur peut avoir un compte sur le serveur principal du
projet, avec un accès sécurisé, de l'espace disque, un répertoire public
et tous les outils de développement. Les développeurs peuvent y compiler
leurs paquets et les mainteneurs du miroir s'occupent de la synchronisation.
Tank héberge aussi le site internet, le web boot et les dépôts Mercurial: 
<a href="http://tank.slitaz.org/">tank.slitaz.org</a>
</p>
<p>
L'utilisation du build host est décrite dans le Cookbook:
<a href="../en/doc/cookbook/build-host.html">SliTaz Build Host (tank)</a>.
</p>

<a name="repos"></a>
<h3>Dépôts Mercurial</h3>
<p>
Tous les sous-projets tels que Tazpkg, Tazwok ou Tazlito ont leurs propres 
dépôts Hg sur le serveur du projet, tout comme le wok. Les développeurs ont
un compte et des droits en écriture afin de pouvoir envoyer leurs recettes,
mises à jour ou modifications. Il est bien sûr possible de demander la création  
d'un nouveau dépôt pour collaborer sur un nouveau sous-projet lié à SliTaz.
A noter qu'il y a 2 domaines : <a href="http://hg.slitaz.org/">hg.slitaz.org</a>
est public et <code>repos.slitaz.org</code> nécessite authentification, c'est-à-dire 
que vous pouvez cloner hg.slitaz.org mais pas y pousser vos changements ou fichiers.
</p>
<h4>~/.hgrc</h4>
<p>
Mercurial utilise un fichier caché <code>~./hgrc</code> permettant de 
spécifier son nom d'utilisateur. Il faut mettre votre nom et adresse mail pour
qu'on sache qui a modifié quoi. Et attention à ne pas être <em>root</em> pour
pousser vos modifications. Exemple :
</p>
<pre class="script">
[ui]
username = Prénom Nom &lt;you@example.org&gt;
</pre>
<h4>Cloner, modifier, commiter et pousser</h4>
<p>
Vous avez le choix de cloner anonymement via hg.slitaz.org ou directement avec
votre login et mot de passe. Pour cloner un dépôt tel que le wok :
</p>
<pre>
 $ hg clone http://repos.slitaz.org/wok/
</pre>
<p>
Copier, créer, modifier des recettes ou des fichiers dans <code>stuff</code>. 
Avant de pouvoir pousser vos modifs, il faut les additionner à votre dépôt 
local et les commiter. A noter que la commande <code>status</code> permet de 
savoir quels fichiers ont été modifiés :
</p>
<pre>
 $ cd wok
 $ hg status
 $ hg add
 $ hg commit
</pre>
<p>
La commande <code>commit</code> va ouvrir l'éditeur de texte Nano pour écrire le message
destiné aux logs (Ctrl + X pour enregistrer et quitter). Vous pouvez éviter
Nano en utilisant l'option : <code>-m "Message"</code>. And please, 
messages in English if possible :
</p>
<pre>
 $ hg commit -m "Message for Mercurial log"
</pre>
<p>
Une fois que tout est prêt, vous pouvez encore utiliser la commande
<code>log</code> pour voir ce qui va être affiché sur l'interface web. Pour 
pousser vos changements c'est <code>push</code> :
</p>
<pre>
 $ hg log
 $ hg push
</pre>
<p>
Si vous avez cloné depuis hg.slitaz.org, il faut alors pousser en spécifiant
le bon URL :
</p>
<pre>
 $ hg push http://repos.slitaz.org/wok/
</pre>
<h4>Mettre à jour un wok local</h4>
<p>
Pour mettre à jour votre wok local avec celui du serveur (<em>pull</em> pour
tirer les changements) :
</p>
<pre>
 $ hg pull
 $ hg update
</pre>
<h4>Commandes utiles</h4>
<p>
Des commandes hg qui peuvent servir.
</p>
<ul>
	<li><code>hg help</code> : affiche la liste complète des commandes.</li>
	<li><code>hg rollback</code> : annule la dernière action exécutée (commit,
	pull, push).</li>
	<li><code>hg log &lt;paquet&gt;</code> : affiche les logs pour un paquet.</li>
	<li><code>hg head</code> : affiche le dernier log.</li>
</ul>

<a name="pkgs"></a>
<h3>Paquets tazpkg</h3>
<p>
Les paquets tazpkg de SliTaz sont créés automatiquement via Tazwok et les
recettes contenues dans le wok, <a href="../doc/cookbook/">le Cookbook</a>
décrit <a href="../doc/cookbook/wok-tools.html">l'utilisation des outils SliTaz</a> 
et le format des <a href="../doc/cookbook/receipts.html">recettes</a>,
c'est sans doute par un petit peu de lecture qu'il faut commencer.
</p>
<p>
Concernant le choix des paquets, l'idée est de proposer un paquet par tâche ou 
fonctionnalité, c'est à dire pas (trop) de doublons et de trouver 
l'application la plus légère dans son domaine. A noter que les paquets actuels
ne sont pas figés, si vous trouvez une alternative à un paquet existant, étant
plus légère, ayant plus de fonctionnalités ou étant plus <em>sexy</em> pour
quelques Ko supplémentaires, vous pouvez la proposer sur la liste. Une 
attention particulière est portée aux paquets destinés au LiveCD : strip,
suppression de tout ce qui est inutile, dépendances et options de compilation.
En général, les paquets candidats pour le corps du LiveCD sont discutés sur
la liste.
</p>
<p>
Avant de commencer à compiler et créer des paquets pour SliTaz, assurez-vous 
qu'une recette n'existe pas dans le wok undigest, disponible sur le miroir
principal de SliTaz. N'oubliez pas non plus que les membres de la liste sont
là pour vous aider et que pour bien commencer, <a href="../doc/cookbook/wok-tools.html"
>la documentation du wok et des outils</a> existe.
</p>

<a name="site"></a>
<h3>Gestion du site Web et des livres</h3>
<p>
La gestion du site et des livres (Handbook et Cookbook) est faite via un 
dépôt Mercurial, ce qui nous permet de traviller à plusieurs. Il faut
juste installer <code>mercurail</code> sur SliTaz et connaître les commandes
de base. Une fois le dépôt cloné vous avez une copie complète du site en
local pour commencer à travailler. Pour cloner le site web :
</p>
<pre>
 $ hg clone http://hg.slitaz.org/website
</pre>
<p>
Si vous avez les droits :
</p>
<pre>
 $ hg clone http://repos.slitaz.org/website
</pre>
<p>
Sur SliTaz vous pouvez installer le serveur web Lighttpd et mettre le
site dans votre répertoire ~/Public, cela permet de naviguer dans votre
copie locale via localhost/~user.
</p>

<h3>Diff et patch</h3>
<p>
Les utilitaires <code>diff</code> et <code>patch</code> sont des outils en
ligne de commande permettant de créer et d'appliquer un fichier contenant
les différences entre deux fichiers. Cette technique est souvent utilisée
pour collaborer et permet d'extraire clairement les modifications apportées
au fichier original. Pour créer un fichier <code>diff</code> lisible par
les humains dans un simple éditeur de texte, il faut utiliser l'option
<code>-u</code> en argument :
</p>
<pre>
 $ diff -u file.orig file.new > file.diff
</pre>
<p>
Pour appliquer un patch :
</p>
<pre>
 $ patch file.orig file.diff
</pre>

<!-- End of content with round corner -->
</div>
<div id="content_bottom">
<div class="bottom_left"></div>
<div class="bottom_right"></div>
</div>

<!-- Start of footer and copy notice -->
<div id="copy">
<p>
Dernière modification : 2009-20-03 03:00:00 -
<a href="#top">Haut de la page</a>
</p>
<p>
Copyright &copy; 2009 <a href="http://www.slitaz.org/">SliTaz</a> -
<a href="http://www.gnu.org/licenses/gpl.html">GNU General Public License</a>
</p>
<!-- End of copy -->
</div>

<!-- Bottom and logo's -->
<div id="bottom">
<p>
<a href="http://validator.w3.org/check?uri=referer"><img
   src="../../pics/website/xhtml10.png" alt="Valid XHTML 1.0"
   title="Code validé XHTML 1.0"
   style="width: 80px; height: 15px;" /></a>
</p>
</div>

</body>
</html>


