<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
    "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head>
    <title>SliTaz Cookbook (en) - RootCD</title>
    <meta http-equiv="content-type" content="text/html; charset=ISO-8859-1" />
    <meta name="description" content="slitaz English cookbook" />
    <meta name="expires" content="never" />
    <meta name="modified" content="2008-02-26 18:30:00" />
    <meta name="publisher" content="www.slitaz.org" />
    <meta name="author" content="Christophe Lincoln"/>
    <link rel="shortcut icon" href="favicon.ico" />
    <link rel="stylesheet" type="text/css" href="book.css" />
</head>
<body bgcolor="#ffffff">

<!-- Header and quick navigation -->
<div id="header">
<div align="right" id="quicknav">
    <a name="top"></a>
    <a href="index.html">Table of contents</a>
</div>
<h1><font color="#3E1220">SliTaz Cookbook (en)</font></h1>
</div>

<!-- Content. -->
<div id="content">
<div class="content-right"></div>

<h2><font color="#df8f06">Rootcd</font></h2>
<p>
Descriptions of files contained on the cdrom.
</p>

<ul>
  	<li><a href="#syslinux">Syslinux/isolinux.</a></li>
	<li><a href="#splash">Isolinux boot splash image.</a></li>
	<li><a href="#isolinux-iso">ISO bootable with isolinux.</a></li>
	<li><a href="#grub">GRUB.</a></li>
	<li><a href="#grub-iso">ISO bootable with GRUB.</a></li>
	<li><a href="#memtest86">Memtest86.</a></li>
</ul>

<a name="syslinux"></a>
<h3>Syslinux/isolinux</h3>
<p>
Syslinux and main bootloader of SliTaz - we use the isolinux version to start 
the system contained on the CD-ROM. Simple effective and configurable, isolinux
was installed during the creation of the base system.
The binary is named isolinux.bin and its configuration file: isolinux.cfg.
Here's an example of isolinux.cfg using isolinux.msg to post the splash
image and displayable help files via F1, F2, F3 and F4. You will find the 
files help.txt, options.txt, etc in <a href="slitaz-tools.html">SliTaz tools</a>.
</p>
<pre class="script">display isolinux.msg
default slitaz
label slitaz
	kernel /boot/bzImage
	append initrd=/boot/rootfs.gz rw root=/dev/null vga=788
implicit 0	
prompt 1	
timeout 80
F1 help.txt
F2 options.txt
F3 isolinux.msg
F4 display.txt
</pre>

<a name="splash"></a>
<h3>Isolinux boot splash image</h3>
<p>
We can configure isolinux to display a splash image when booting SliTaz or
any other operating system using isolinux. This image has a particular
format <code>.lss</code>, suitable for Syslinux, and must be indexed using the 16 color 
mode. You can use the official logo, ppmforge, imagemagick, GIMP or
other tools to create your image.
</p>
<p>
The Syslinux file (sample/syslogo.lss) provides an official logo which you can 
directly use by copying to the root of the CD-ROM. SliTaz 
provides a logo (rootcd/boot/isolinux/splash.lss) which you can locate in 
<a href="slitaz-tools.html">SliTaz tools</a>.
To display a splash image when booting, it's necessary that the 'display' option calls 
the isolinux.msg file which loads the *.lss format image. Note that the isolinux.msg file 
uses 24 ASCII characters. Example using 'echo' and an isolinux.msg file incorporating a .lss 
splash image:
</p>
<pre> # echo -e "\24isplash.lss\n" &gt; isolinux.msg
</pre>
<p>
You can also add a text message underneath the splash image by modifying this 
file with your favorite text editor, <code>echo</code> or <code>cat</code> and so on.
</p>

<a name="isolinux-iso"></a>
<h3>ISO bootable with isolinux</h3>
<p>
To create a bootable ISO image using isolinux and genisoimage:
</p>
<pre> # genisoimage -R -o slitaz-test.iso -b boot/isolinux/isolinux.bin \
   	-c boot/isolinux/boot.cat -no-emul-boot -boot-load-size 4 \
   	-V "SliTaz" -input-charset iso8859-1 -boot-info-table rootcd 
</pre>

<a name="grub"></a>
<h3>GRUB</h3>
<p>
GRUB (GRand Unified Bootloader) is a bootloader distributed by the GNU
project. This is what is used during installation to a hard drive; it can
boot Linux, BSD, HURD and Window$. GRUB provides stage2_eltorito
to start the ISO images. To find stage2_eltorito on your system, you need
to have the GRUB package installed. Finally you copy stage2_eltorito to the 
root of the cdrom. Note that SliTaz provides a (.tazpkg) package 
grub-0.97 that you can find on the mirrors or you can rebuild grub-0.97
from sources. Sample copy of the <code>stage2_eltorito</code> image from a 
Debian system or SliTaz:
</p>
<pre> # mkdir -p rootcd/boot/grub
 # cp /usr/lib/grub/i386-pc/stage2_eltorito \
   	rootcd/boot/grub
</pre>
<p>
The GRUB configuration file is called menu.lst and can be edited with your
favorite text editor. Example:
</p>
<pre class="script"># By default, boot the first entry.
default 0

# Boot automatically after 20 secs.
timeout 20

# Change the colors.
color yellow/brown white/black

title  SliTaz GNU/Linux 1.0 (vga 800x600) (Kernel 2.6.20)
       kernel /boot/bzImage root=/dev/null vga=788
       initrd /boot/rootfs.gz

title  SliTaz GNU/Linux 1.0 (vga 1024x768) (Kernel 2.6.20)
       kernel /boot/bzImage root=/dev/null vga=771
       initrd /boot/rootfs.gz
</pre>

<a name="grub-iso"></a>
<h3>ISO bootable with GRUB</h3>
<p>
To create a bootable ISO image using GRUB and genisoimage or mkisofs:
</p>
<pre> # genisoimage -R -o slitaz-test.iso -b boot/grub/stage2_eltorito \
   	-no-emul-boot -V "SliTaz" -boot-load-size 4 -input-charset iso8859-1 \
   	-boot-info-table rootcd
</pre>
<a name="memtest86"></a>
<h3>Memtest86</h3>
<p>
The application memtest86 is a tool to test random access memory
(RAM). We download the utility into the src directory, decompress the archive, 
and copy the (precompiled) binary:
</p>
<pre> # mkdir -v -p src
 # cd src
 # wget http://www.memtest86.com/memtest86-3.2.tar.gz
 # tar xzfv memtest86-3.2.tar.gz
 # cd memtest86-3.2
 (# more README)
 # cp precomp.bin ../../rootcd/boot/memtest
 # cd ../..
</pre>
<p>
Once installed, you can add the label for the memtest86 file to isolinux.cfg, 
specifing the path to the utility:
</p>
<pre class="script">label memtest
	kernel /boot/memtest
</pre>
<p>
Or if you want to use GRUB, here's the line to launch memtest86:
</p>
<pre class="script">title 	Memtest86 (Test system memory)
kernel 	/boot/memtest
</pre>
<p>
Once the lines are added, you can then create a new ISO and test.
</p>

<!-- End of content -->
</div>

<!-- Footer. -->
<div id="footer">
	<div class="footer-right"></div>
	<a href="#top">Top of the page</a> | 
	<a href="index.html">Table of contents</a>
</div>

<div id="copy">
    Copyright &copy; 2008 <a href="http://www.slitaz.org/en/">SliTaz</a> -
    <a href="http://www.gnu.org/licenses/gpl.html">GNU General Public License</a>;<br />
    Documentation is under
    <a href="http://www.gnu.org/copyleft/fdl.html">GNU Free Documentation License</a>
    and code is <a href="http://validator.w3.org/">valid xHTML 1.0</a>.
</div>

</body>
</html>
