<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
    "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="pt" lang="pt">
<head>
    <title>Manual SliTaz (pt) - Administração do Sistema</title>
    <meta http-equiv="content-type" content="text/html; charset=ISO-8859-1" />
    <meta name="description" content="slitaz portuguese handbook" />
    <meta name="expires" content="never" />
    <meta name="modified" content="2008-07-18 06:00:00" />
    <meta name="publisher" content="www.slitaz.org" />
    <meta name="author" content="Christophe Lincoln"/>
    <link rel="shortcut icon" href="favicon.ico" />
    <link rel="stylesheet" type="text/css" href="book.css" />
</head>
<body bgcolor="#ffffff">

<!-- Header and quick navigation -->
<div id="header">
<div align="right" id="quicknav">
    <a name="top"></a>
    <a href="x-window.html">X Window System</a> |
    <a href="index.html">Conteúdo</a>
</div>
<h1><font color="#3E1220">Manual SliTaz (pt)</font></h1>
</div>

<!-- Content. -->
<div id="content">
<div class="content-right"></div>

<h2><font color="#df8f06">Administração do Sistema</font></h2>

<ul>
    <li><a href="#devices">Dispositivos e acesso a discos.</a></li>
    <li><a href="#users-admin">Usuários, grupos e passwords.</a></li>
    <li><a href="#locale">Linguagem e teclado.</a></li>
    <li><a href="#bash">Instalação do shell Bash.</a></li> 
    <li><a href="#time">Ajuste do relógio do sistema.</a></li>
    <li><a href="#cron">Agendar a execução de comandos.</a></li>
    <li><a href="#local.sh">Acrescentar comandos para execução durante o boot.</a></li>
</ul>

<a name="devices"></a>
<h3>Dispositivos e acesso a discos</h3>
<p>
Com o Linux, os discos e as mídias USB são considerados dispositivos. Para 
acessá-los é necessário montá-los num ponto de montagem (um diretório). No 
SliTaz, os dispositivos podem ser montados através de uma interface gráfica, 
usando o <code>mountbox</code>, ou através da linha de comandos. Para montar a
primeira partição de um disco rígido em <code>/mnt/disk</code>: 
</p>
<pre>
 # mkdir -p /mnt/disk
 # mount /dev/hda1 /mnt/disk
</pre>
<p>
Para montar um CD-ROM ou uma mídia USB devem ser usados pontos de montagem 
localizados em <code>/media</code>. Note que, para um CD-ROM, basta especificar 
o caminho do dispositivo e que também já existe um ponto de montagem para um 
disco USB:
</p>
<pre>
 # mount /dev/cdrom
 # mount /dev/sda1 /media/flash
</pre>
<h4>Sistema de Arquivos ntfs</h4>
<p> 
Caso seja necessário acesso de leitura e escrita em um sistema de arquivos ntfs
do Windows deve-se instalar pacotes adicionais a partir do mirror. O driver 
<code>ntfs-3g</code> permite um acesso estável a partições NTFS e o pacote 
<code>ntfsprogs</code> fornece ferramentas de manipulação que dependem do
<code>fuse</code>. Note que as partições NTFS podem ser formatadas, movidas ou 
redimensionadas em modo gráfico com o programa Gparted. 
</p>

<a name="users-admin"></a>
<h3>Usuários, grupos e passwords</h3>
<p>
Para gerenciar usuários e grupos no SliTaz é necessário usar a linha de comando, 
mas as permissões dos arquivos podem ser alteradas em modo gráfico com o 
gerenciador de arquivos emelFM2. Para adicionar ou remover usuários e grupos, é
necessário estar logado como root (administrador). O super usuário root pode 
também alterar todas as passwords de usuários, enquanto um usuário comum pode 
apenas alterar a sua própria password. Para adicionar ou remover um usuário
chamado linux: 
</p>
<pre>
 # adduser linux
 # deluser linux
</pre>
<p>
Para adicionar ou remover um grupo, deve usar-se <code>addgroup</code> ou 
<code>delgroup</code>. Para alterar a password do usuário atual ou a de um 
usuário específico, deve-se usar o comando <code>passwd</code>: 
</p>
<pre>
 $ passwd
 # passwd username
</pre>
<h4>Grupo 'audio'</h4>
<p>
Para que um novo usuário possa ouvir música ou arquivos de áudio, ele deve 
pertencer ao grupo <code>audio</code>. Para adicionar um usuário ao grupo audio: 
</p>
<pre>
 # adduser -G audio user_name
</pre>

<a name="locale"></a>
<h3>Linguagem e layout de teclado</h3>
<p>
O SliTaz armazena a configuração da localização geográfica em 
<code>/etc/locale.conf</code>, arquivo que é lido por <code>/etc/profile</code> 
a cada login, e a configuração do teclado é armazenada em <code>/etc/kmap.conf</code>. 
Estes dois arquivos podem ser editados com o editor de texto de sua
preferência ou então configurados, respectivamente, com os comandos 
<code>tazlocale</code> e <code>tazkmap</code>. As configurações que você escolheu 
no primeiro boot podem ser alteradas digitando, root (administrador): 
</p>
<pre>
 # tazlocale
 Ou:
 # tazkmap
</pre>
<p>
Para listar todas as localizações geográficas disponíveis ou a sua configuração 
atual pode ser usado o comando <code>locale</code>, tanto como usuário comum 
quanto como root:
</p>
<pre>
 $ locale -a
 $ locale
</pre>

<a name="bash"></a>
<h3>Shell Bash</h3>
<p>
No SliTaz estão disponíveis os shells ash e sh com uma ligação para Ash, que é o
shell fornecido pelo Busybox. Caso pretenda usar o Bash (Bourne Again SHell), 
deverá primeiro instalar o pacote bash como <code>root</code>, copiar o arquivo 
<code>.profile</code> localizado na pasta home e renomeá-lo para <code>.bashrc</code> e,
então, editar o arquivo <code>/etc/passwd</code> com o editor de sua preferência
e mudar o shell para :/bin/bash 
</p>
<pre>
 # tazpkg get-install bash
 # cp /home/hacker/.profile home/hacker/.bashrc
 # Note root user: cp /home/hacker/.profile ~/.bashrc
 # nano /etc/passwd   # :/bin/bash
</pre>
<p>
No primeiro login posterior a estas operações o shell padrão será o bash, o que 
pode ser confirmado teclando <code>env</code> na linha de comando. 
</p>

<a name="time"></a>
<h3>Relógio do Sistema</h3>
<p>
Para saber a hora e data atuais do sistema, basta teclar <code>date</code>. No 
SliTaz, o arquivo de configuração do fuso horário está armazenado em  
<code>/etc/TZ</code> e pode ser editado com o editor de texto de sua preferência 
ou pode-se, simplesmente, utilizar o comando <code>echo</code> para efetuar as 
alterações. Podem consultar-se os fusos horários disponíveis na pasta 
<code>/usr/share/zoneinfo</code>. Eis um exemplo, usando o fuso horário 
Europe/London (Europa/Londres): 
</p>
<pre>
 # echo "Europe/London" &gt; /etc/TZ
</pre>
<h4>Rdate</h4>
<p>
Para sincronizar o relógio do sistema com um servidor NTS (network time server),
pode-se usar, como <code>root</code>, o comando <code>rdate -s</code>: 
</p>
<pre>
 # rdate -s tick.greyware.com
</pre>
<p>
Para exibir a hora no servidor remoto, deve-se usar o comando <code>rdate -p</code>:
</p>
<pre> $ rdate -p tick.greyware.com
</pre>
<h4>Hwclock</h4>
<p>
O comando hwclock permite sincronizar a hora do relógio de hardware com o do 
sistema e vice-versa. 
Para sincronizar o relógio do sistema com o do hardware ( --utc = hora universal, 
-l = hora local): 
</p>
<pre>
 # hwclock -w --utc
</pre>
<p>
Para sincronizar o relógio do hardware com o do sistema: 
</p>
<pre>
 # hwclock -s --utc
</pre>

<a name="cron"></a>
<h3>Agendar a execução de comandos</h3>
<p>
O daemon 'crond' permite executar comandos automaticamente, agendando-os para um
dia ou hora específicos. Isto pode ser de grande utilidade para tarefas de 
rotina, como é o caso da administração do sistema. A pasta usada pelo cron é 
<code>/var/spool/cron/crontabs</code>. 
</p>
<p>
Cada utilizador do sistema pode ter as suas tarefas agendadas; estas são 
definidas no arquivo <code>/var/spool/cron/crontabs/user</code>. O utilitário 
crontab permite, entre outras funções, mostrar uma lista das tarefas de um 
utilizador específico. A sintaxe dos arquivos é a seguinte: 
</p>
<pre class="script">mm hh dd MMM DDD command &gt; log
</pre>
<p>
Como exemplo, iremos criar um arquivo com privilégios de administrador root e 
testar o daemon 'crond' com uma tarefa que será executada uma vez por minuto - 
escrever a data num arquivo chamado /tmp/crond.test. Note que este utilitário 
possui uma opção, <code>crontab</code>, que permite editar o arquivo cron usando
o editor 'vi', que não é fornecido com o SliTaz. Em vez deste, pode-se usar o 
GNU nano (teclando &lt;Ctrl+X&gt; para gravar e sair do programa): 
</p>
<pre> # nano /var/spool/cron/crontabs/root
</pre>
<pre class="script">* * * * * date &gt;&gt; /tmp/crond.test
</pre>
<p>
Executar o <code>crond</code> com a opção <code>-b</code> (background), 
configurada a partir de <code>/etc/daemons.conf</code> e usando o script de 
inicialização: 
</p>
<pre> # /etc/init.d/crond start
</pre>
<p>
Você pode agora aguardar alguns minutos e, em seguida, ver o conteúdo do 
arquivo: /tmp/crond.test... OK: 
</p>
<pre> # cat /tmp/crond.test
</pre>
<p>
Para parar ou reiniciar o daemon crond: 
</p>
<pre> # /etc/init.d/crond stop
 Ou :
 # /etc/init.d/crond restart
</pre>
<h4>Executar o daemon crond a cada boot</h4>
<p>
Para executar o daemon 'crond' a cada boot do sistema, basta acrescentá-lo à 
variável <code>START_DAEMONS</code> no arquivo de configuração 
<code>/etc/rcS.conf</code>, quer antes quer depois do servidor web ou do 
servidor SSH. 
</p>

<a name="local.sh"></a>
<h3>Acrescentar comandos para execução durante o boot</h3>
<p>
Durante o processo de boot são executados alguns scripts que permitem configurar
diversos serviços, caso da inicialização do servidor web, da rede, etc. No SliTaz, 
o script <code>/etc/init.d/local.sh</code> permite que sejam adicionados comandos 
que se pretendam executar durante a inicialização do sistema. Pode-se também criar 
novos scripts em /etc/init.d, ligações a estes em /etc/rc.scripts para 
scripts shell e, ainda, usar o arquivo /etc/rc.d para links ao daemon/script de 
inicialização em /etc/rcS.conf: 
</p>
<pre> # nano /etc/init.d/local.sh
</pre>

<!-- End of content -->
</div>

<!-- Footer. -->
<div id="footer">
	<div class="footer-right"></div>
	<a href="#top">Topo da Página</a> | 
	<a href="index.html">Conteúdo</a>
</div>

<div id="copy">
    Copyright &copy; 2008 <a href="http://www.slitaz.org/pt/">SliTaz</a> -
    <a href="http://www.gnu.org/licenses/gpl.html">GNU General Public License</a>;<br />
    Documentation is under
    <a href="http://www.gnu.org/copyleft/fdl.html">GNU Free Documentation License</a>
    and code is <a href="http://validator.w3.org/">valid xHTML 1.0</a>.
</div>

</body>
</html>
